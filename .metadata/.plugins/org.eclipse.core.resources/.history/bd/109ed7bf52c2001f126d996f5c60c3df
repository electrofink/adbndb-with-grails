package de.uni_koeln.hs

import util.DateValidator;

class Person {
	
	String dateOfBirth
	String dateOfDeath
	String bio
	boolean gender
	
	static belongsTo = Location
	
	static hasMany = [names:Name, relations:Relation, confessions:Confession,
		locations:Location, works:Work]
	
	static constraints = {

		dateOfBirth(blank:false, validator:{val, obj ->
			return DateValidator.validate(val, false)
		})
		
		dateOfDeath(blank: true, validator:{val, obj ->
			return DateValidator.validate(val, true)
		})
		
		bio(maxSize:10000, blank:true)

	}
	
	
	def shortBio() {
		if(bio.length() > 200)
			return bio.substring(0, 200)
		return bio
	}
	
	@Override
	String toString() {
		if(names != null)
			return names.toString()+": "+this.id
		return this.ident().toString()
	}
}
